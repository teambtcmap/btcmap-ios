//
//  ElementSystemImages.swift
//  BTCMap
//
//  Created by salva on 1/2/23.
//

import Foundation
import UIKit
import SwiftUI

struct ElementSystemImages {
    static let sport = [
        "fitness": "figure.run.circle.fill",
        "crossfit": "figure.run.circle.fill",
        "yoga": "figure.run.circle.fill",
        "equestrian": "figure.equestrian.sports",
        "scuba_diving": "water.waves",
        "paragliding": "cloud.fill",
        "parachuting": "cloud.fill",
        "shooting": "figure.hunting",
        "climbing": "figure.climbing",
        "soccer": "soccerball", // "soccerball.circle.fill""
        "football": "soccerball",
        "darts": "trophy.fill",
        "billiards": "trophy.fill",
        "surfing": "figure.surfing",
        "skateboard": "figure.skating",
        "jiu-jitsu": "figure.martial.arts",
        "golf": "figure.golf",
        "cycling": "figure.outdoor.cycle",
        "tennis": "tennisball.fill",
    ]
    static let cuisine = [
        "wok": "fork.knife.circle.fill",
        "sushi": "fork.knife.circle.fill",
        "burger": "fork.knife.circle.fill",
        "hot_dog": "fork.knife.circle.fill",
        "pizza": "fork.knife.circle.fill",
        "coffee_shop": "fork.knife.circle.fill",
        "coffee": "fork.knife.circle.fill",
        "chicken": "fork.knife.circle.fill",
        "italian": "fork.knife.circle.fill",
        "sandwich": "fork.knife.circle.fill",
        "japanese": "fork.knife.circle.fill",
        "curry": "fork.knife.circle.fill",
        "raw_food": "fork.knife.circle.fill",
        "organic": "fork.knife.circle.fill",
        "american": "fork.knife.circle.fill",
        "crepe": "fork.knife.circle.fill",
        "kebab": "fork.knife.circle.fill",
        "juice": "fork.knife.circle.fill",
        "ice_cream": "fork.knife.circle.fill",
        "barbecue": "fork.knife.circle.fill",
        "dessert": "fork.knife.circle.fill",
        "donut": "fork.knife.circle.fill",
        "doughnut": "fork.knife.circle.fill",
        "noodle": "fork.knife.circle.fill",
        "pasta": "fork.knife.circle.fill",
        "bakery": "fork.knife.circle.fill",
        "snacks": "fork.knife.circle.fill",
        "cupcake": "fork.knife.circle.fill",
        "bagel": "fork.knife.circle.fill",
        "bagel_shop": "fork.knife.circle.fill",
        "russian": "fork.knife.circle.fill",
        "steak_house": "fork.knife.circle.fill",
        "steak": "fork.knife.circle.fill",
        "chinese": "fork.knife.circle.fill",
        "thai": "fork.knife.circle.fill",
        "asian": "fork.knife.circle.fill",
        "mexican": "fork.knife.circle.fill",
        "breakfast": "fork.knife.circle.fill",
    ]
    static let shop = [
        "computer": "tv.circle.fill",
        "clothes": "bag.circle",
        "jewelry": "location.circle.fill",
        "hairdresser": "scissors.circle.fills",
        "yes": "bag.circle",
        "electronics": "tv.circle.fill",
        "supermarket": "cart.circle.fill",
        "beauty": "mouth.fill",
        "car_repair": "minus.plus.batteryblock.exclamationmark.fill",
        "books": "books.vertical.fill",
        "convenience": "bag.circle",
        "furniture": "sofa.fill",
        "travel_agency": "globe.americas.fill",
        "gift": "gift.fill",
        "mobile_phone": "iphone.circle",
        "car": "car.circle.fill",
        "tobacco": "location.circle.fill",
        "bakery": "birthday.cake.fill",
        "bicycle.circle.fill": "bicycle.circle.fill",
        "massage": "location.circle.fill",
        "florist": "camera.macro",
        "e-cigarette": "location.circle.fill",
        "optician": "eyeglasses",
        "photo": "camera.circle.fill",
        "farm": "carrot.fill",
        "sports": "tennis.racket.circle.fill",
        "music": "music.mic.circle.fill",
        "art": "paintpalette.fill",
        "shoes": "bag.circle",
        "wine": "wineglass",
        "hardware": "screwdriver.fill",
        "car_parts": "car.circle.fill",
        "toys": "teddybear.fill",
        "cannabis": "leaf.circle.fill",
        "alcohol": "wineglass",
        "pet": "pawprint.fill",
        "kiosk": "location.circle.fill",
        "laundry": "washer.fill",
        "pastry": "fork.knife.circle.fill",
        "cosmetics": "location.circle.fill",
        "coffee": "cup.and.saucer.fill",
        "beverages": "fork.knife.circle.fill",
        "stationery": "paperclip.circle.fill",
        "department_store": "bag.circle",
        "chocolate": "fork.knife.circle.fill",
        "scuba_diving": "water.waves",
        "video": "video.circle",
        "motorcycle": "figure.outdoor.cycle",
        "seafood": "fork.knife.circle.fill",
        "surf": "figure.surfing",
        "grocery": "cart.circle.fill"
    ]
    static let tourism = [
        "hotel": "bed.double.circle.fill",
        "apartment": "bed.double.circle.fill",
        "chalet": "bed.double.circle.fill",
        "camp_site": "tent.2.circle.fill",
        "motel": "bed.double.circle.fill",
        "apartments": "bed.double.circle.fill",
        "guest_house": "bed.double.circle.fill",
        "hostel": "bed.double.circle.fill",
        "attraction": "location.circle.fill",
        "artwork": "photo.circle",
        "information": "info.circle",
    ]
    static let healthcare = [
        "dentist": "cross.circle.fill",
        "doctor": "cross.circle.fill",
        "alternative": "leaf.circle.fill",
        "clinic": "cross.circle.fill",
        "pharmacy": "pill.circle.fill",
        "psychotherapist:": "cross.case.circle.fill",
        "hospital": "cross.circle.fill",
        "physiotherapist": "cross.circle.fill",
        "counselling": "cross.case.circle.fill",
        "optometrist": "eye.circle.fill",
        "sample_collection": "cross.vial.fill",
        "cosmetic_surgery": "nose.fill",
        "therapist": "cross.case.circle.fill"
    ]
    static let craft = [
        "photographer": "camera.circle.fill",
        "electronics_repair": "tv.circle.fill",
        "electrician": "poweroutlet.type.g.fill",
        "painter": "photo.circle",
        "carpenter": "hammer.fill",
        "sculptor": "person.bust.fill",
        "plumber": "wrench.adjustable.fill",
        "jeweller": "location.circle.fill",
        "glaziery": "location.circle.fill",
        "shoemaker": "location.circle.fill"
    ]
    static let company = [
        "transport": "bus.fill",
        "farm": "carrot.fill"
    ]
    static let amenity = [
        "restaurant": "fork.knife.circle.fill",
        "atm": "bitcoinsign.circle.fill",
        "cafe": "cup.and.saucer.fill",
        "bar": "wineglass",
        "bureau_de_change": "bitcoinsign.circle.fill",
        "fast_food": "fork.knife.circle.fill",
        "bank": "bitcoinsign.circle.fill",
        "dentist": "location.circle.fill",
        "pub": "ork.knife.circle.fill",
        "fuel": "fuelpump.fill",
        "doctros": "cross.circle.fill",
        "pharmacy": "pill.fill",
        "taxi": "car.side.fill",
        "clinic": "cross.circle.fill",
        "car_rental": "car.circle.fill",
        "school": "graduationcap.fill",
        "veterinary": "pawprint.fill",
        "ice_cream": "fork.knife.circle.fill",
        "hospital": "cross.circle.fill",
        "boat_rental": "sailboat.fill",
        "money_transfer": "bitcoinsign.circle.fill",
        "marketplace": "bag.circle",
        "arts_centre": "paintpalette.fill",
        "college": "graduationcap.fill",
        "coworking_space": "building.2.crop.circle",
        "car_wash": "car.circle.fill",
        "university": "graduationcap.fill",
        "spa": "location.circle.fill",
        "post_office": "envelope.fill",
        "swingerclub": "party.popper.fill",
        "cinema": "popcorn.fill",
        "bicycle.circle.fill_rental": "bicycle.circle.fill",
        "theatre": "theatermasks.fill",
        "recycling": "tree.circle",
        "library": "books.vertical.fill",
        "parking": "parkingsign.circle",
        "police": "location.circle.fill",
        "casino": "bitcoinsign.circle.fill",
        "notary": "location.circle.fill",
        "dancing_school": "figure.socialdance",
        "stripclub": "figure.dance",
        "nightclub": "figure.socialdance",
        "motorcycle_rental": "figure.outdoor.cycle",
        "payment_terminal": "bitcoinsign.circle.fill",
        "charging_station": "car.circle.fill",
        "training": "figure.strengthtraining.traditional",
        "bitcoin_office": "bitcoinsign.circle.fill",
        "office": "building.2.crop.circle",
        "language_school": "globe.americas.fill",
        "community_centre": "person.2.circle.fill"
    ]
    static let place = [
        "farm": "carrot.fill"
    ]
    static let leisure = [
        "park": "tree.circle"
    ]
    static let building = [
        "farm": "carrot.fill",
        "church": "location.circle.fill"
    ]
    
    // MARK: - SwiftUI
    static func swiftUISystemImage(for element: API.Element, with renderingMode: Image.TemplateRenderingMode) -> Image? {
        guard let uiImage = systemImage(for: element) else { return nil }
        return Image(uiImage: uiImage).renderingMode(renderingMode)
    }
    
    // MARK: - UIKit
    static func systemImage(for element: API.Element, with renderingMode: UIImage.RenderingMode) -> UIImage? {
        return systemImage(for: element)?.withRenderingMode(renderingMode)
    }
    
    static func systemImage(for element: API.Element) -> UIImage? {
        guard let tags = element.osmJson.tags else { return nil }
        
        if let cuisine = tags["cuisine"] {
            return lookup(cuisine, in: Self.cuisine) ?? UIImage(systemName: "fork.knife.circle.fill")
        }
        if let shop = tags["shop"] {
            return lookup(shop, in: Self.shop) ?? UIImage(systemName: "bag.circle")
        }
        if let sport = tags["sport"] {
            return lookup(sport, in: Self.sport)
        }
        if let tourism = tags["tourism"] {
            return lookup(tourism, in: Self.tourism)
        }
        if let healthcare = tags["healthcare"] {
            return lookup(healthcare, in: Self.healthcare) ??  UIImage(systemName: "cross.circle.fill")
        }
        if let craft = tags["craft"] {
            return lookup(craft, in: Self.craft)
        }
        if let amenity = tags["amenity"] {
            return lookup(amenity, in: Self.amenity)
        }
        if let place = tags["place"] {
            return lookup(place, in: Self.place)
        }
        if let leisure = tags["leisure"] {
            return lookup(leisure, in: Self.leisure)
        }
        if let building = tags["building"] {
            return lookup(building, in: Self.building)
        }
        
        return UIImage(systemName: "location.circle.fill")
    }
    
    static func lookup(_ value: String, in map: [String: String]) -> UIImage? {
        let components = value.lowercased().components(separatedBy: ";")
        for component in components {
            if let systemImage = map[component] {
                return UIImage(systemName: systemImage)
            }
        }
        return UIImage(systemName: "location.circle.fill")
    }
}
